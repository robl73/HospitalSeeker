<?xml version="1.0" encoding="UTF-8" standalone="no"?>
<databaseChangeLog xmlns="http://www.liquibase.org/xml/ns/dbchangelog" 
                    xmlns:ext="http://www.liquibase.org/xml/ns/dbchangelog-ext" 
                    xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" 
                    xsi:schemaLocation="http://www.liquibase.org/xml/ns/dbchangelog-ext 
                                        http://www.liquibase.org/xml/ns/dbchangelog/dbchangelog-ext.xsd 
                                        http://www.liquibase.org/xml/ns/dbchangelog 
                                        http://www.liquibase.org/xml/ns/dbchangelog/dbchangelog-3.4.xsd">

    <changeSet author="george (generated)" id="1476206219622-1">
        <createTable tableName="DEPARTMENT_DOCTORINFO">
            <column name="DEPARTMENTS_ID" type="BIGINT">
                <constraints nullable="false"/>
            </column>
            <column name="DOCTORS_ID" type="BIGINT">
                <constraints nullable="false"/>
            </column>
        </createTable>
    </changeSet>
    <changeSet author="george (generated)" id="1476206219622-2">
        <createTable tableName="ROLE_USERS">
            <column name="USERS_ID" type="BIGINT">
                <constraints nullable="false"/>
            </column>
            <column name="ROLE_ID" type="BIGINT">
                <constraints nullable="false"/>
            </column>
        </createTable>
    </changeSet>
    <changeSet author="george (generated)" id="1476206219622-3">
        <createTable tableName="admintokenconfig">
            <column autoIncrement="true" name="id" type="BIGINT">
                <constraints primaryKey="true" primaryKeyName="admintokenconfigPK"/>
            </column>
            <column name="token" type="VARCHAR(255)"/>
            <column name="value" type="INT4"/>
        </createTable>
    </changeSet>
    <changeSet author="george (generated)" id="1476206219622-4">
        <createTable tableName="appointment">
            <column name="id" type="BIGINT">
                <constraints nullable="false"/>
            </column>
            <column name="end_date" type="BYTEA"/>
            <column name="start_date" type="BYTEA"/>
            <column name="text" type="VARCHAR(255)"/>
            <column name="doctorinfo_id" type="BIGINT"/>
            <column name="userdetail_id" type="BIGINT"/>
        </createTable>
    </changeSet>
    <changeSet author="george (generated)" id="1476206219622-5">
        <createTable tableName="carditem">
            <column name="id" type="BIGINT">
                <constraints nullable="false"/>
            </column>
            <column name="COMPLAINT" type="CLOB"/>
            <column name="date" type="timestamp"/>
            <column name="PRESCRIPTION" type="CLOB"/>
            <column name="RESULT" type="CLOB"/>
            <column name="doctorinfo_id" type="BIGINT"/>
            <column name="patientCard_id" type="BIGINT"/>
        </createTable>
    </changeSet>
    <changeSet author="george (generated)" id="1476206219622-6">
        <createTable tableName="departmenstname">
            <column name="id" type="BIGINT">
                <constraints nullable="false"/>
            </column>
            <column name="name" type="VARCHAR(255)"/>
            <column name="number" type="VARCHAR(255)"/>
            <column name="specialization" type="VARCHAR(255)"/>
        </createTable>
    </changeSet>
    <changeSet author="george (generated)" id="1476206219622-7">
        <createTable tableName="department">
            <column name="id" type="BIGINT">
                <constraints nullable="false"/>
            </column>
            <column name="imagepath" type="VARCHAR(255)"/>
            <column name="name" type="VARCHAR(255)"/>
            <column name="hospital_id" type="BIGINT"/>
        </createTable>
    </changeSet>
    <changeSet author="george (generated)" id="1476206219622-8">
        <createTable tableName="doctorinfo">
            <column name="id" type="BIGINT">
                <constraints nullable="false"/>
            </column>
            <column name="category" type="VARCHAR(255)"/>
            <column name="specialization" type="VARCHAR(255)"/>
            <column name="userdetails_id" type="BIGINT"/>
        </createTable>
    </changeSet>
    <changeSet author="george (generated)" id="1476206219622-9">
        <createTable tableName="events">
            <column name="id" type="BIGINT">
                <constraints nullable="false"/>
            </column>
            <column name="end_date" type="BYTEA"/>
            <column name="id_dhtmlx" type="BIGINT"/>
            <column name="length" type="BIGINT"/>
            <column name="pattern" type="VARCHAR(255)"/>
            <column name="pid" type="BIGINT"/>
            <column name="start_date" type="BYTEA"/>
            <column name="text" type="VARCHAR(255)"/>
            <column name="type" type="VARCHAR(255)"/>
            <column name="scheduler_id" type="BIGINT"/>
        </createTable>
    </changeSet>
    <changeSet author="george (generated)" id="1476206219622-10">
        <createTable tableName="feedback">
            <column name="id" type="BIGINT">
                <constraints nullable="false"/>
            </column>
            <column name="date" type="BYTEA"/>
            <column name="message" type="VARCHAR(255)"/>
            <column name="consumer_id" type="BIGINT"/>
            <column name="producer_id" type="BIGINT"/>
        </createTable>
    </changeSet>
    <changeSet author="george (generated)" id="1476206219622-11">
        <createTable tableName="hospital">
            <column name="id" type="BIGINT">
                <constraints nullable="false"/>
            </column>
            <column name="building" type="VARCHAR(255)"/>
            <column name="city" type="VARCHAR(255)"/>
            <column name="country" type="VARCHAR(255)"/>
            <column name="street" type="VARCHAR(255)"/>
            <column name="description" type="VARCHAR(255)">
                <constraints nullable="false"/>
            </column>
            <column name="imagepath" type="VARCHAR(255)"/>
            <column name="latitude" type="FLOAT8">
                <constraints nullable="false"/>
            </column>
            <column name="longitude" type="FLOAT8">
                <constraints nullable="false"/>
            </column>
            <column name="name" type="VARCHAR(255)">
                <constraints nullable="false"/>
            </column>
        </createTable>
    </changeSet>
    <changeSet author="george (generated)" id="1476206219622-12">
        <createTable tableName="hospital_users">
            <column name="hospital_id" type="BIGINT">
                <constraints nullable="false"/>
            </column>
            <column name="managers_id" type="BIGINT">
                <constraints nullable="false"/>
            </column>
        </createTable>
    </changeSet>
    <changeSet author="george (generated)" id="1476206219622-13">
        <createTable tableName="password_reset_tokens">
            <column name="id" type="BIGINT">
                <constraints nullable="false"/>
            </column>
            <column name="expirydate" type="timestamp"/>
            <column name="token" type="VARCHAR(255)"/>
            <column name="user_id" type="BIGINT">
                <constraints nullable="false"/>
            </column>
        </createTable>
    </changeSet>
    <changeSet author="george (generated)" id="1476206219622-14">
        <createTable tableName="patientcard">
            <column name="id" type="BIGINT">
                <constraints nullable="false"/>
            </column>
            <column name="patientinfo_id" type="BIGINT"/>
        </createTable>
    </changeSet>
    <changeSet author="george (generated)" id="1476206219622-15">
        <createTable tableName="patientinfo">
            <column name="id" type="BIGINT">
                <constraints nullable="false"/>
            </column>
            <column name="blood_group" type="VARCHAR(255)"/>
            <column name="patientcard_id" type="BIGINT"/>
            <column name="userdetail_id" type="BIGINT"/>
        </createTable>
    </changeSet>
    <changeSet author="george (generated)" id="1476206219622-16">
        <createTable tableName="persistent_logins">
            <column name="series" type="VARCHAR(255)">
                <constraints nullable="false"/>
            </column>
            <column name="last_used" type="timestamp"/>
            <column name="token" type="VARCHAR(255)">
                <constraints nullable="false"/>
            </column>
            <column name="username" type="VARCHAR(255)">
                <constraints nullable="false"/>
            </column>
        </createTable>
    </changeSet>
    <changeSet author="george (generated)" id="1476206219622-17">
        <createTable tableName="role">
            <column name="id" type="BIGINT">
                <constraints nullable="false"/>
            </column>
            <column name="type" type="VARCHAR(255)">
                <constraints nullable="false"/>
            </column>
        </createTable>
    </changeSet>
    <changeSet author="george (generated)" id="1476206219622-18">
        <createTable tableName="scheduler">
            <column name="id" type="BIGINT">
                <constraints nullable="false"/>
            </column>
            <column name="app_size" type="SMALLINT"/>
            <column name="day_end" type="SMALLINT"/>
            <column name="day_start" type="SMALLINT"/>
            <column name="week_size" type="SMALLINT"/>
            <column name="doctorinfo_id" type="BIGINT"/>
        </createTable>
    </changeSet>
    <changeSet author="george (generated)" id="1476206219622-19">
        <createTable tableName="userdetail">
            <column name="id" type="BIGINT">
                <constraints nullable="false"/>
            </column>
            <column name="address" type="VARCHAR(255)"/>
            <column name="birthdate" type="BYTEA"/>
            <column name="firstname" type="VARCHAR(255)"/>
            <column name="gender" type="VARCHAR(255)"/>
            <column name="imagepath" type="VARCHAR(255)"/>
            <column name="lastname" type="VARCHAR(255)"/>
            <column name="phone" type="VARCHAR(255)"/>
            <column name="user_id" type="BIGINT"/>
        </createTable>
    </changeSet>
    <changeSet author="george (generated)" id="1476206219622-20">
        <createTable tableName="users">
            <column name="id" type="BIGINT">
                <constraints nullable="false"/>
            </column>
            <column name="email" type="VARCHAR(255)">
                <constraints nullable="false"/>
            </column>
            <column name="enabled" type="BOOLEAN">
                <constraints nullable="false"/>
            </column>
            <column name="password" type="VARCHAR(255)">
                <constraints nullable="false"/>
            </column>
            <column name="userdetails_id" type="BIGINT"/>
        </createTable>
    </changeSet>
    <changeSet author="george (generated)" id="1476206219622-21">
        <createTable tableName="verifications_tokens">
            <column name="id" type="BIGINT">
                <constraints nullable="false"/>
            </column>
            <column name="expirydate" type="timestamp"/>
            <column name="token" type="VARCHAR(255)"/>
            <column name="user_id" type="BIGINT">
                <constraints nullable="false"/>
            </column>
        </createTable>
    </changeSet>
    <changeSet author="george (generated)" id="1476206219622-22">
        <addPrimaryKey columnNames="USERS_ID, ROLE_ID" tableName="ROLE_USERS"/>
    </changeSet>
    <changeSet author="george (generated)" id="1476206219622-23">
        <addPrimaryKey columnNames="id" constraintName="appointmentPK" tableName="appointment"/>
    </changeSet>
    <changeSet author="george (generated)" id="1476206219622-24">
        <addPrimaryKey columnNames="id" constraintName="carditemPK" tableName="carditem"/>
    </changeSet>
    <changeSet author="george (generated)" id="1476206219622-25">
        <addPrimaryKey columnNames="id" constraintName="departmenstnamePK" tableName="departmenstname"/>
    </changeSet>
    <changeSet author="george (generated)" id="1476206219622-26">
        <addPrimaryKey columnNames="id" constraintName="departmentPK" tableName="department"/>
    </changeSet>
    <changeSet author="george (generated)" id="1476206219622-27">
        <addPrimaryKey columnNames="id" constraintName="doctorinfoPK" tableName="doctorinfo"/>
    </changeSet>
    <changeSet author="george (generated)" id="1476206219622-28">
        <addPrimaryKey columnNames="id" constraintName="eventsPK" tableName="events"/>
    </changeSet>
    <changeSet author="george (generated)" id="1476206219622-29">
        <addPrimaryKey columnNames="id" constraintName="feedbackPK" tableName="feedback"/>
    </changeSet>
    <changeSet author="george (generated)" id="1476206219622-30">
        <addPrimaryKey columnNames="id" constraintName="hospitalPK" tableName="hospital"/>
    </changeSet>
    <changeSet author="george (generated)" id="1476206219622-31">
        <addPrimaryKey columnNames="id" constraintName="password_reset_tokensPK" tableName="password_reset_tokens"/>
    </changeSet>
    <changeSet author="george (generated)" id="1476206219622-32">
        <addPrimaryKey columnNames="id" constraintName="patientcardPK" tableName="patientcard"/>
    </changeSet>
    <changeSet author="george (generated)" id="1476206219622-33">
        <addPrimaryKey columnNames="id" constraintName="patientinfoPK" tableName="patientinfo"/>
    </changeSet>
    <changeSet author="george (generated)" id="1476206219622-34">
        <addPrimaryKey columnNames="series" constraintName="persistent_loginsPK" tableName="persistent_logins"/>
    </changeSet>
    <changeSet author="george (generated)" id="1476206219622-35">
        <addPrimaryKey columnNames="id" constraintName="rolePK" tableName="role"/>
    </changeSet>
    <changeSet author="george (generated)" id="1476206219622-36">
        <addPrimaryKey columnNames="id" constraintName="schedulerPK" tableName="scheduler"/>
    </changeSet>
    <changeSet author="george (generated)" id="1476206219622-37">
        <addPrimaryKey columnNames="id" constraintName="userdetailPK" tableName="userdetail"/>
    </changeSet>
    <changeSet author="george (generated)" id="1476206219622-38">
        <addPrimaryKey columnNames="id" constraintName="usersPK" tableName="users"/>
    </changeSet>
    <changeSet author="george (generated)" id="1476206219622-39">
        <addPrimaryKey columnNames="id" constraintName="verifications_tokensPK" tableName="verifications_tokens"/>
    </changeSet>
    <changeSet author="george (generated)" id="1476206219622-40">
        <addUniqueConstraint columnNames="token" constraintName="UC_PERSISTENT_LOGINSTOKEN_COL" deferrable="false" disabled="false" initiallyDeferred="false" tableName="persistent_logins"/>
    </changeSet>
    <changeSet author="george (generated)" id="1476206219622-41">
        <addUniqueConstraint columnNames="username" constraintName="UC_PERSISTENT_LOGINSUSERNAME_COL" deferrable="false" disabled="false" initiallyDeferred="false" tableName="persistent_logins"/>
    </changeSet>
    <changeSet author="george (generated)" id="1476206219622-42">
        <addUniqueConstraint columnNames="type" constraintName="UC_ROLETYPE_COL" deferrable="false" disabled="false" initiallyDeferred="false" tableName="role"/>
    </changeSet>
    <changeSet author="george (generated)" id="1476206219622-43">
        <addUniqueConstraint columnNames="email" constraintName="UC_USERSEMAIL_COL" deferrable="false" disabled="false" initiallyDeferred="false" tableName="users"/>
    </changeSet>
    <changeSet author="george (generated)" id="1476206219622-44">
        <addForeignKeyConstraint baseColumnNames="userdetail_id" baseTableName="patientinfo" constraintName="FK_1m7wpycqebo4p1hb1ciew8lju" deferrable="false" initiallyDeferred="false" referencedColumnNames="id" referencedTableName="userdetail"/>
    </changeSet>
    <changeSet author="george (generated)" id="1476206219622-45">
        <addForeignKeyConstraint baseColumnNames="userdetails_id" baseTableName="doctorinfo" constraintName="FK_1r6dadb3ajbaxwkpdx1v4u9n9" deferrable="false" initiallyDeferred="false" referencedColumnNames="id" referencedTableName="userdetail"/>
    </changeSet>
    <changeSet author="george (generated)" id="1476206219622-46">
        <addForeignKeyConstraint baseColumnNames="patientCard_id" baseTableName="carditem" constraintName="FK_23f7e1f3aoynlynkmrk6elwaq" deferrable="false" initiallyDeferred="false" referencedColumnNames="id" referencedTableName="patientcard"/>
    </changeSet>
    <changeSet author="george (generated)" id="1476206219622-47">
        <addForeignKeyConstraint baseColumnNames="userdetails_id" baseTableName="users" constraintName="FK_2xe4lqrkwymg4aoshgadolask" deferrable="false" initiallyDeferred="false" referencedColumnNames="id" referencedTableName="userdetail"/>
    </changeSet>
    <changeSet author="george (generated)" id="1476206219622-48">
        <addForeignKeyConstraint baseColumnNames="doctorinfo_id" baseTableName="carditem" constraintName="FK_32y3umi6mfuwbxmi9ub93ju9w" deferrable="false" initiallyDeferred="false" referencedColumnNames="id" referencedTableName="doctorinfo"/>
    </changeSet>
    <changeSet author="george (generated)" id="1476206219622-49">
        <addForeignKeyConstraint baseColumnNames="ROLE_ID" baseTableName="ROLE_USERS" constraintName="FK_67w5hj99v5nvjexfv0cf1mxus" deferrable="false" initiallyDeferred="false" referencedColumnNames="id" referencedTableName="role"/>
    </changeSet>
    <changeSet author="george (generated)" id="1476206219622-50">
        <addForeignKeyConstraint baseColumnNames="user_id" baseTableName="verifications_tokens" constraintName="FK_79hy0bqeu0oobh0thq8bgbae1" deferrable="false" initiallyDeferred="false" referencedColumnNames="id" referencedTableName="users"/>
    </changeSet>
    <changeSet author="george (generated)" id="1476206219622-51">
        <addForeignKeyConstraint baseColumnNames="consumer_id" baseTableName="feedback" constraintName="FK_7uda74mreyd8pe0bc0rgm1ufe" deferrable="false" initiallyDeferred="false" referencedColumnNames="id" referencedTableName="doctorinfo"/>
    </changeSet>
    <changeSet author="george (generated)" id="1476206219622-52">
        <addForeignKeyConstraint baseColumnNames="user_id" baseTableName="userdetail" constraintName="FK_90967b34b8g7o7uyt8uujn4ya" deferrable="false" initiallyDeferred="false" referencedColumnNames="id" referencedTableName="users"/>
    </changeSet>
    <changeSet author="george (generated)" id="1476206219622-53">
        <addForeignKeyConstraint baseColumnNames="userdetail_id" baseTableName="appointment" constraintName="FK_b51bk1hxlblc0fq7l65dkcnc5" deferrable="false" initiallyDeferred="false" referencedColumnNames="id" referencedTableName="userdetail"/>
    </changeSet>
    <changeSet author="george (generated)" id="1476206219622-54">
        <addForeignKeyConstraint baseColumnNames="USERS_ID" baseTableName="ROLE_USERS" constraintName="FK_cunrd1kjdr3pwcekkhw8r5k2l" deferrable="false" initiallyDeferred="false" referencedColumnNames="id" referencedTableName="users"/>
    </changeSet>
    <changeSet author="george (generated)" id="1476206219622-55">
        <addForeignKeyConstraint baseColumnNames="patientcard_id" baseTableName="patientinfo" constraintName="FK_ft38uu60cjfl7q23ejvb78hk3" deferrable="false" initiallyDeferred="false" referencedColumnNames="id" referencedTableName="patientcard"/>
    </changeSet>
    <changeSet author="george (generated)" id="1476206219622-56">
        <addForeignKeyConstraint baseColumnNames="scheduler_id" baseTableName="events" constraintName="FK_h25bu5arkbwfh9fwpabk0x9e2" deferrable="false" initiallyDeferred="false" referencedColumnNames="id" referencedTableName="scheduler"/>
    </changeSet>
    <changeSet author="george (generated)" id="1476206219622-57">
        <addForeignKeyConstraint baseColumnNames="doctorinfo_id" baseTableName="appointment" constraintName="FK_hx479pw4gje0ktsjfwvl9pwn8" deferrable="false" initiallyDeferred="false" referencedColumnNames="id" referencedTableName="doctorinfo"/>
    </changeSet>
    <changeSet author="george (generated)" id="1476206219622-58">
        <addForeignKeyConstraint baseColumnNames="doctorinfo_id" baseTableName="scheduler" constraintName="FK_io94dc8e3xgt37ggaiq0kcsl1" deferrable="false" initiallyDeferred="false" referencedColumnNames="id" referencedTableName="doctorinfo"/>
    </changeSet>
    <changeSet author="george (generated)" id="1476206219622-59">
        <addForeignKeyConstraint baseColumnNames="DOCTORS_ID" baseTableName="DEPARTMENT_DOCTORINFO" constraintName="FK_ivkij0rfsc9yoc3v5iamgux7c" deferrable="false" initiallyDeferred="false" referencedColumnNames="id" referencedTableName="doctorinfo"/>
    </changeSet>
    <changeSet author="george (generated)" id="1476206219622-60">
        <addForeignKeyConstraint baseColumnNames="DEPARTMENTS_ID" baseTableName="DEPARTMENT_DOCTORINFO" constraintName="FK_jdh6lxu9mgpemg0xeqqccwpdc" deferrable="false" initiallyDeferred="false" referencedColumnNames="id" referencedTableName="department"/>
    </changeSet>
    <changeSet author="george (generated)" id="1476206219622-61">
        <addForeignKeyConstraint baseColumnNames="user_id" baseTableName="password_reset_tokens" constraintName="FK_la2ts67g4oh2sreayswhox1i6" deferrable="false" initiallyDeferred="false" referencedColumnNames="id" referencedTableName="users"/>
    </changeSet>
    <changeSet author="george (generated)" id="1476206219622-62">
        <addForeignKeyConstraint baseColumnNames="patientinfo_id" baseTableName="patientcard" constraintName="FK_nl0kd9nw0gugyysura8qqpymw" deferrable="false" initiallyDeferred="false" referencedColumnNames="id" referencedTableName="patientinfo"/>
    </changeSet>
    <changeSet author="george (generated)" id="1476206219622-63">
        <addForeignKeyConstraint baseColumnNames="managers_id" baseTableName="hospital_users" constraintName="FK_o7prsdub8c63s5w469e06q83" deferrable="false" initiallyDeferred="false" referencedColumnNames="id" referencedTableName="users"/>
    </changeSet>
    <changeSet author="george (generated)" id="1476206219622-64">
        <addForeignKeyConstraint baseColumnNames="producer_id" baseTableName="feedback" constraintName="FK_pvf13utfatebavsixvqxwo3ob" deferrable="false" initiallyDeferred="false" referencedColumnNames="id" referencedTableName="users"/>
    </changeSet>
	
	
	

    <!-- ====================================================================  -->  
    

   
   
    <changeSet author="Admin (generated)" id="1475144899277-1">
        <createTable tableName="departmenstname">
            <column name="id" type="BIGINT">
                <constraints nullable="false"/>
            </column>
            <column name="departmentName" type="VARCHAR(255)"/>
            <column name="departmentNumber" type="INT4"/>
            <column name="departmentSpecialization" type="VARCHAR(255)"/>
        </createTable>
    </changeSet>
    <changeSet author="Admin (generated)" id="1475144899277-2">
        <addPrimaryKey columnNames="id" constraintName="departmenstnamePK" tableName="departmenstname"/>
    </changeSet>
    <changeSet author="Admin (generated)" id="1475144899277-3">
        <dropColumn columnName="name" tableName="department"/>
    </changeSet>
    <changeSet author="Admin (generated)" id="1475260053153-1">
        <addColumn tableName="departmenstname">
            <column name="name" type="varchar(255)"/>
        </addColumn>
    </changeSet>
    <changeSet author="Admin (generated)" id="1475260053153-2">
        <addColumn tableName="departmenstname">
            <column name="number" type="varchar(255)"/>
        </addColumn>
    </changeSet>
    <changeSet author="Admin (generated)" id="1475260053153-3">
        <addColumn tableName="departmenstname">
            <column name="specialization" type="varchar(255)"/>
        </addColumn>
    </changeSet>
    <changeSet author="Admin (generated)" id="1475260053153-4">
        <dropColumn columnName="departmentName" tableName="departmenstname"/>
    </changeSet>
    <changeSet author="Admin (generated)" id="1475260053153-5">
        <dropColumn columnName="departmentNumber" tableName="departmenstname"/>
    </changeSet>
    <changeSet author="Admin (generated)" id="1475260053153-6">
        <dropColumn columnName="departmentSpecialization" tableName="departmenstname"/>
    </changeSet>
</databaseChangeLog>
